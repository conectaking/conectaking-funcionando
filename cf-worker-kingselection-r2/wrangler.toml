name = "kingselection-r2"
main = "src/index.js"
compatibility_date = "2026-02-02"

# Rota para r2.conectaking.com.br (obrigatório para upload funcionar)
[[routes]]
pattern = "r2.conectaking.com.br/*"
zone_name = "conectaking.com.br"

# Bind do bucket R2 (Workers -> R2, sem S3 API)
# R2_BUCKET = conforme prompt; KS_BUCKET = compatibilidade com código antigo
r2_buckets = [
  { binding = "R2_BUCKET", bucket_name = "kingselection" },
  { binding = "KS_BUCKET", bucket_name = "kingselection" }
]

[vars]
# Origens permitidas para CORS (upload do navegador -> Worker)
ALLOWED_ORIGINS = "https://conectaking.com.br,https://www.conectaking.com.br,https://conectaking-api.onrender.com,http://127.0.0.1:5500,http://localhost:5500,http://127.0.0.1:3000,http://localhost:3000"

# Configure como secret no Cloudflare/WRANGLER:
# wrangler secret put KS_WORKER_SECRET
# Deve ser o MESMO valor de KINGSELECTION_WORKER_SECRET no Render.

